---
title: "Interaktiv sjekk av fil"
author: "Vegard"
date: "2022-09-29"
output: html_document
---

- This document contain useful functions for exploration of data files
- Alternative to open the file in Excel
- This document should only be used interactively when needed, not saved as report.
- Code chunks may contain several alternative functions. 
    - Run individual functions by placing cursor within function and press Ctrl + Enter . 

Run this to load functions: 

```{r, include=FALSE, message=FALSE}
knitr::opts_chunk$set(cache = F, echo = F)
source("https://raw.githubusercontent.com/helseprofil/KHvalitetskontroll/main/R/setup.R")
```


# Load data

* Load data file into environment
* For KUBE files in DATERT or NESSTAR-folders, the ReadFile function may be used. 
* For other files (.csv or .rds), use the other functions

```{r}
# KUBE files in DATERT or NESSTAR-folders
data <- ReadFile(file = "BEFOLK_GK", # Matching, if >1 file found in folder, specify file name further
                  modus = "KH", # KH or NH
                  folder = "2023") # "DATERT" or 4-digit year if file in NESSTAR-folder

# Other CSV files
data <- fread("F:/Forskningsprosjekter/PDB 2455 - Helseprofiler og til_/PRODUKSJON/ORGDATA/SSB/ENEFHIB/ORG/2023/ENEFHIB.csv")

# .Rda-files

data <- readRDS("F:/Forskningsprosjekter/PDB 2455 - Helseprofiler og til_/PRODUKSJON/PRODUKTER/MELLOMPROD/R/STABLAORG/DATERT/TRANGBODDHET_2022-11-07-18-38.rds")


```

# Show full data

* Scrollable table

```{r include = F, eval = F}
data 

# To show in separate (larger) window 
View(data)
```

# Show time series

- For boxplot checks
- The new data file must be loaded (see methods above)
- Plots the time series for one specific strata
- Specify all dimensions so only one level is selected
    - If NULL, the total group will be selected by default if the dimension exists
    for non-standard dimensions. A message will indicate which group was selected
    .
```{r}
ShowTS(data = dfnew, # Name of data object
       maltall = "MEIS", # Value to plot on y-axis
       geo = 0301, # NUMERIC: e.g. 0
       alder = "0_120", # INTERVAL: XX_YY, e.g. "0_120"
       kjonn = NULL, # NUMERIC: 0, 1, or 2
       utdann = NULL, # NUMERIC
       innvkat = NULL, # NUMERIC
       landbak = NULL, # NUMERIC
       extradim = "KODEGRUPPE", # e.g. "KODEGRUPPE"
       extraval = "Dod_med_hjerteinfarkt") # e.g. "Dod_med_hjerteinfarkt"
```

# Check if two objects are identical

* Check if two objects (e.g. data files) are identical
* Insert name of the objects to be compared
* Returns TRUE or FALSE

```{r}
identical(object1, object2)
```




